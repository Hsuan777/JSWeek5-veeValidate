{"version":3,"sources":["index.js"],"names":["Vue","el","data","hexAPI","personID","temporary","product","quantity","shopping","moneyTotal","isLoading","methods","getData","vm","axios","get","then","response","addShopping","id","post","getShopping","total","forEach","item","price","deleteShopping","delID","deleteAll","$","modal","pay","console","log","length","alert","window","location","created"],"mappings":"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","sourcesContent":["new Vue({\r\n  el: \"#productList\",\r\n  data: {\r\n    hexAPI: {\r\n      personID: \"85a8cd22-1b7d-43af-9b5a-5aa679129559\",\r\n      data: [],\r\n    },\r\n    temporary: {\r\n      product: \"\",\r\n      quantity: \"1\",\r\n    },\r\n    shopping:{\r\n      data:[],\r\n      moneyTotal:0,\r\n    },\r\n    isLoading: false,\r\n  },\r\n  methods: {\r\n    getData() {\r\n      let vm = this;\r\n      vm.isLoading = true;\r\n      axios.get(`https://course-ec-api.hexschool.io/api/${vm.hexAPI.personID}/ec/products`)\r\n        .then((response) => {\r\n          vm.hexAPI.data = response.data.data;\r\n          vm.isLoading = false;\r\n        })\r\n    },\r\n    addShopping(id) {\r\n      let vm = this;\r\n      vm.isLoading = true;\r\n      vm.temporary.product = id;\r\n      axios.post(`https://course-ec-api.hexschool.io/api/${vm.hexAPI.personID}/ec/shopping`, vm.temporary)\r\n        .then(() => {\r\n          vm.getShopping();\r\n        })\r\n    },\r\n    getShopping() {\r\n      let vm = this;\r\n      axios.get(`https://course-ec-api.hexschool.io/api/${vm.hexAPI.personID}/ec/shopping`)\r\n        .then((response) => {\r\n          vm.shopping.data = response.data.data;\r\n          let total = 0;\r\n          vm.shopping.data.forEach(item=>{\r\n            total += item.product.price;\r\n          })\r\n          vm.shopping.moneyTotal = total;\r\n          vm.isLoading = false;\r\n        });\r\n    },\r\n    deleteShopping(delID) {\r\n      let vm = this;\r\n      vm.isLoading = true;\r\n      vm.shopping.data.forEach((item) => {\r\n        if (delID === item.product.id) {\r\n          axios\r\n            .delete(`https://course-ec-api.hexschool.io/api/${vm.hexAPI.personID}/ec/shopping/${delID}`)\r\n            .then(() => {\r\n              vm.getShopping();\r\n            });\r\n        }\r\n      })\r\n    },\r\n    deleteAll() {\r\n      let vm = this;\r\n      vm.isLoading = true;\r\n      axios\r\n        .delete(`https://course-ec-api.hexschool.io/api/${vm.hexAPI.personID}/ec/shopping/all/product`)\r\n        .then(() => {\r\n          vm.getShopping();\r\n          vm.isLoading = false;\r\n          $('#shoppingModal').modal('hide');\r\n          // this.$refs.shoppingModal('hide');\r\n        });\r\n    },\r\n    pay(){\r\n      let vm = this;\r\n      console.log(vm.shopping.data);\r\n      if (vm.shopping.data.length === 0){\r\n        alert(\"您未挑選房間喔!~\")\r\n        $('#shoppingModal').modal('hide');\r\n      } else{\r\n        window.location = \"payment.html\";\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getData();\r\n    this.getShopping();\r\n\r\n  },\r\n  \r\n})"],"file":"index.js"}